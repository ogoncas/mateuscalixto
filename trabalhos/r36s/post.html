<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R36S Hub - Post</title>

    <link rel="icon" type="image/png" href="favicon.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/phosphor-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<style>
    /* Styles iguais ao index.html para consistência */
    :root {
        --bg-color: #121212;
        --card-bg: #1e1e1e;
        --text-main: #ffffff;
        --text-muted: #aaaaaa;
        --border: #333333;
        --radius: 8px;
        --transition: all 0.2s ease;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        background: var(--bg-color);
        color: var(--text-main);
        font-family: 'Inter', sans-serif;
        line-height: 1.6;
        min-height: 100vh; /* Aprimoramento UX: Garante que o body ocupe a altura total para posicionar footer no fundo */
        display: flex;
        flex-direction: column;
    }

    main { 
        flex: 1; /* Aprimoramento UX: Expande o conteúdo principal para empurrar o footer para baixo */
    }

    .container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 1rem;
        width: 100%; /* Aprimoramento: Garante que o container seja 100% em telas menores */
    }

    .post-banner { 
        width: 100%; 
        height: auto; 
        max-height: 400px;
        object-fit: cover; 
        border-radius: var(--radius);
    }

    .post-body { 
        padding: 2rem 0; 
        display: flex; 
        flex-direction: column; 
        gap: 1rem;
    }

    .post-header {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .post-meta {
        color: var(--text-muted);
        font-size: 0.9rem;
        display: flex; /* Aprimoramento UI: Alinha itens de meta em linha para melhor leitura */
        gap: 1rem; /* Espaçamento entre autor e data */
        flex-wrap: wrap;
    }

    .markdown-content { 
        margin: 1rem 0; 
        font-size: 1rem; 
        line-height: 1.6; 
        color: var(--text-main);
    }

    .markdown-content h1, .markdown-content h2, .markdown-content h3 {
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
    }

    .markdown-content p { margin-bottom: 1rem; }

    .markdown-content ul, .markdown-content ol {
        margin-bottom: 1rem;
        padding-left: 1.5rem;
    }

    .markdown-content li { margin-bottom: 0.5rem; }

    .markdown-content a {
        color: var(--text-main);
        text-decoration: underline;
    }

    .markdown-content code {
        background: #252525;
        padding: 0.2rem 0.4rem;
        border-radius: 4px;
    }

    .markdown-content pre {
        background: #252525;
        padding: 1rem;
        border-radius: var(--radius);
        overflow-x: auto;
        margin-bottom: 1rem;
    }

    .markdown-content blockquote {
        border-left: 4px solid var(--border);
        padding-left: 1rem;
        margin: 1rem 0;
        color: var(--text-muted);
    }

    .markdown-content img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 1rem auto;
        border-radius: var(--radius);
    }

    .markdown-content table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 1rem;
        overflow-x: auto; /* Aprimoramento: Permite scroll horizontal em tabelas largas em telas pequenas */
        display: block;
    }

    .markdown-content th, .markdown-content td {
        border: 1px solid var(--border);
        padding: 0.75rem;
        text-align: left;
    }

    .markdown-content th { background: #252525; }

    .btn-primary {
        background: #333333;
        color: var(--text-main);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 500;
        font-size: 1rem;
        transition: var(--transition);
        text-decoration: none;
        display: inline-block;
        text-align: center;
    }

    .btn-primary:hover {
        background: #444444;
    }

    .btn-full { width: 100%; }

    .loading-state {
        text-align: center;
        padding: 2rem;
        color: var(--text-muted);
    }

    .back-btn {
        margin-bottom: 2rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-main);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition); /* Aprimoramento UI: Adiciona transição suave ao hover */
    }

    .back-btn:hover {
        color: var(--text-muted);
    }

    /* Aprimoramento UX/UI: Removido borda, radius e background para "direto na tela" */
    .post-body {
        padding: 2rem;
    }

    /* ==========================================================================
    FOOTER - Copiado e adaptado do index.html para coesão
    ========================================================================== */
    footer {
        background: #1e1e1e;
        border-top: 1px solid var(--border);
        padding: 2rem 0;
        color: var(--text-muted);
        font-size: 0.9rem;
        width: 100%; /* Aprimoramento: Footer sempre full-width */
    }

    .footer-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .footer-copyright {
        flex: 1;
    }

    .footer-links {
        display: flex;
        gap: 1.5rem;
        flex-wrap: wrap;
    }

    footer a {
        color: var(--text-main);
        text-decoration: none;
        transition: var(--transition);
    }

    footer a:hover {
        color: var(--text-muted);
        text-decoration: underline;
    }

    /* Aprimoramento Responsividade: Media Queries mais flexíveis com unidades relativas */
    @media (max-width: 1024px) {
        .container {
            max-width: 90%; /* Ajusta para telas médias */
        }

        .post-banner {
            max-height: 350px;
        }
    }

    @media (max-width: 768px) {
        .container {
            padding: 0 0.5rem; /* Reduz padding lateral em telas menores */
        }

        .post-banner {
            max-height: 300px; /* Reduz altura máxima do banner em mobile para melhor proporção */
        }

        .post-body {
            padding: 1.5rem; /* Reduz padding interno */
            gap: 0.75rem; /* Menor gap entre elementos */
        }

        .post-meta {
            flex-direction: column; /* Empilha meta itens em coluna para telas estreitas */
            gap: 0.5rem;
        }

        .markdown-content {
            font-size: 0.95rem; /* Leve redução no tamanho da fonte para melhor legibilidade em mobile */
            line-height: 1.5; /* Ajusta line-height para telas menores */
        }

        .markdown-content pre {
            padding: 0.75rem; /* Reduz padding em código */
        }

        .back-btn {
            font-size: 0.9rem; /* Ajusta tamanho do botão de voltar */
            margin-bottom: 1.5rem;
        }

        .btn-primary {
            padding: 0.6rem 1.2rem; /* Botão ligeiramente menor em mobile */
            font-size: 0.95rem;
        }

        footer {
            padding: 1.5rem 0; /* Reduz padding do footer */
        }

        .footer-container {
            flex-direction: column; /* Empilha elementos do footer em coluna */
            text-align: center;
            gap: 1rem;
        }

        .footer-links {
            justify-content: center;
            gap: 1rem;
        }
    }

    @media (max-width: 480px) {
        h1 {
            font-size: 1.5rem; /* Reduz tamanho de títulos em telas muito pequenas */
        }

        .post-meta {
            font-size: 0.85rem; /* Ajusta meta texto */
        }

        .markdown-content {
            font-size: 0.9rem; /* Maior redução para telas muito pequenas */
        }

        .post-body {
            padding: 1rem;
        }

        .post-banner {
            max-height: 250px; /* Ainda menor para proporção ideal */
        }

        .btn-primary {
            padding: 0.5rem 1rem;
        }

        footer {
            font-size: 0.85rem;
            padding: 1rem 0;
        }
    }

    /* Aprimoramento: Adiciona breakpoint para telas maiores que 1200px para flexibilidade */
    @media (min-width: 1200px) {
        .container {
            max-width: 1000px; /* Aumenta largura máxima para telas grandes */
        }

        .markdown-content {
            font-size: 1.05rem; /* Leve aumento para melhor leitura em desktops */
        }
    }
</style>
<body>

    <main class="container">
        <a href="index.html" class="back-btn"><i class="ph-arrow-left"></i> Voltar</a>
        <div id="post-content-area">
            <div class="loading-state">Carregando post...</div>
        </div>
    </main>

    <!-- Adição: Footer para coesão com index.html e melhor UX (navegação persistente) -->
    <footer>
        <div class="footer-container">
            <div class="footer-copyright">
                <a href="https://mateuscalixto.com.br">© 2026 Mateus Calixto</a> | <a href="mailto:contato@mateuscalixto.com.br">contato@mateuscalixto.com.br</a>
            </div>
            <div class="footer-links">
                <a href="https://github.com/ogoncas/mateuscalixto/tree/main/trabalhos/r36s#sobre">Sobre</a>
                <a href="https://github.com/ogoncas/mateuscalixto/tree/main/trabalhos/r36s#termos-de-uso">Termos de Uso</a>
                <a href="https://github.com/ogoncas/mateuscalixto/tree/main/trabalhos/r36s#privacidade">Privacidade</a>
            </div>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBG5BLxR02T6jO8yX9smrELRudlIV1vDOw",
            authDomain: "r36s-97621.firebaseapp.com",
            projectId: "r36s-97621",
            storageBucket: "r36s-97621.firebasestorage.app",
            messagingSenderId: "77809018203",
            appId: "1:77809018203:web:aba6d9dd8b7b523cfd667e"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const typeToLabel = {
            'guide': 'Guias',
            'tutorial': 'Tutoriais',
            'theme': 'Temas',
            'firmware': 'Firmwares',
            'tip': 'Dicas',
            'analysis': 'Análises'
        };

        async function loadPost() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            if (!id) {
                document.getElementById('post-content-area').innerHTML = '<div class="loading-state">Post não encontrado.</div>';
                return;
            }

            try {
                const postDoc = await getDoc(doc(db, "resources", id));
                if (postDoc.exists()) {
                    const data = postDoc.data();

                    let videoHTML = '';
                    if (data.videoUrl) {
                        const match = data.videoUrl.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
                        const videoId = match ? match[1] : data.videoUrl;
                        videoHTML = `
                            <div style="position:relative; padding-bottom:56.25%; height:0; margin: 1rem 0; overflow:hidden; border-radius:var(--radius);">
                                <iframe style="position:absolute; top:0; left:0; width:100%; height:100%;" 
                                src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>
                            </div>`;
                    }
                    
                    let dateStr = '';
                    if (data.createdAt && data.createdAt.toDate) {
                        const date = data.createdAt.toDate();
                        dateStr = date.toLocaleDateString('pt-BR', { year: 'numeric', month: 'long', day: 'numeric' });
                    }
                    
                    document.getElementById('post-content-area').innerHTML = `
                        <img src="${data.thumbnailUrl}" class="post-banner" alt="Banner de ${data.title}" onerror="this.src='https://placehold.co/1200x600/1e1e1e/fff?text=R36S'">
                        <div class="post-body">
                            <div class="post-header">
                                <span class="card-tag">${typeToLabel[data.type] || data.type}</span>
                                <h1>${data.title}</h1>
                            </div>
                            <div class="post-meta">
                                <span>Por: ${data.authorName || 'Anônimo'}</span>
                                ${dateStr ? `<span>Em: ${dateStr}</span>` : ''}
                            </div>
                            
                            <div class="markdown-content">${marked.parse(data.content || 'Sem detalhes.')}</div>
                            
                            ${videoHTML}
                            
                            ${data.link ? `<a href="${data.link}" target="_blank" class="btn-primary btn-full" style="margin-top: 1rem;">Acessar</a>` : ''}  
                        </div>
                    `;
                } else {
                    document.getElementById('post-content-area').innerHTML = '<div class="loading-state">Post não encontrado.</div>';
                }
            } catch (err) {
                document.getElementById('post-content-area').innerHTML = '<div class="loading-state">Erro ao carregar post.</div>';
            }
        }

        loadPost();
    </script>
</body>
</html>